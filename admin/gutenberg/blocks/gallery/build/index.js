(()=>{"use strict";const e=window.React,a=(window.wp.data,{xxl:{columns:6,gutter:1},xl:{columns:5,gutter:1},lg:{columns:4,gutter:1},md:{columns:3,gutter:1},sm:{columns:2,gutter:1},xs:{columns:2,gutter:1}}),{registerBlockType:l}=wp.blocks,{InspectorControls:t,MediaPlaceholder:n,MediaUpload:i}=wp.blockEditor,{PanelBody:o,ToggleControl:r,SelectControl:m,RadioControl:u,RangeControl:s,TextControl:c,Button:g,Modal:d,Flex:b,FlexItem:p,ResponsiveWrapper:h}=wp.components,{__}=wp.i18n,{useEffect:v,useState:x,Fragment:f}=wp.element;l("hupa/theme-gallery",{title:"Theme Galerie",icon:"images-alt2",category:"theme-v3-medien",description:"Ein benutzerdefinierte Galerie mit Grid und Masonry-Grid.",attributes:{images:{type:"array",default:[]},imageSize:{type:"string",default:"large"},imageWidth:{type:"number",default:260},imageHeight:{type:"number",default:160},galleryType:{type:"string",default:"gallery"},imageCrop:{type:"boolean",default:!0},lazyLoad:{type:"boolean",default:!0},lazyLoadAnimation:{type:"boolean",default:!1},repeatAnimation:{type:"boolean",default:!1},animationType:{type:"string",default:""},galleryId:{type:"string",default:""},enableLightbox:{type:"boolean",default:!1},clickAction:{type:"string",default:""},imgLink:{type:"string",default:""},lightboxSingle:{type:"boolean",default:!1},breakpoints:{type:"object",default:{xxl:{columns:6,gutter:1},xl:{columns:5,gutter:1},lg:{columns:4,gutter:1},md:{columns:3,gutter:1},sm:{columns:2,gutter:1},xs:{columns:2,gutter:1}}}},edit({attributes:l,setAttributes:h}){const{images:y,galleryId:I,galleryType:E,repeatAnimation:k,imageSize:N,imageCrop:_,lazyLoad:B,imageWidth:w,imageHeight:S,lazyLoadAnimation:C,lightboxSingle:L,animationType:M,clickAction:R,breakpoints:H}=l;if(!I){const e=`gallery-${Math.random().toString(36).slice(2,9)}`;h({galleryId:e})}const[T,z]=x(!1),U=(e,a,t)=>{const n={...l.breakpoints};n[t]={...n[t],[a]:parseInt(e)},h({breakpoints:n})};v((()=>{y.length>0&&document.querySelectorAll(".sortable-list").forEach((e=>{jQuery(e).sortable({update:(a,l)=>{const t=jQuery(e).sortable("toArray",{attribute:"data-id"}).map((e=>parseInt(e,10))).map((e=>y.find((a=>a.id===e))));h({images:t})}})}))}),[y]),v((()=>{H&&0!==Object.keys(H).length||h({breakpoints:a})}),[H,h]);const[A,G]=x({imageUrl:"",openTab:!1,editId:null}),D=(e,a)=>{const l={...A};l[a]=e,G(l)};return(0,e.createElement)(f,null,(0,e.createElement)(t,null,(0,e.createElement)("div",{className:"gallery-sidebar"},(0,e.createElement)(o,{title:__("Galerie Settings","text-domain")},(0,e.createElement)(m,{label:"Galerie Typ",__nextHasNoMarginBottom:!0,value:E,options:[{label:"Galerie Grid",value:"gallery"},{label:"Masonry Grid",value:"masonry"}],onChange:e=>h({galleryType:e})}),(0,e.createElement)(m,{label:"Image Size",__nextHasNoMarginBottom:!0,value:N,options:[{label:"Thumbnail",value:"thumbnail"},{label:"Medium",value:"medium"},{label:"Large",value:"large"},{label:"Full",value:"full"}],onChange:e=>h({imageSize:e})}),(0,e.createElement)(r,{label:"Image Crop",__nextHasNoMarginBottom:!0,checked:_,onChange:e=>h({imageCrop:e})}),(0,e.createElement)(r,{label:"Lazy load animation",__nextHasNoMarginBottom:!0,checked:C,onChange:e=>h({lazyLoadAnimation:e})}),(0,e.createElement)(r,{label:"Animation wiederholen",__nextHasNoMarginBottom:!0,disabled:!C,checked:k,onChange:e=>h({repeatAnimation:e})}),(0,e.createElement)(s,{label:"Image Height (px)",__nextHasNoMarginBottom:!0,value:S,disabled:!_&&"gallery"!==E,onChange:e=>h({imageHeight:e}),min:50,max:500,step:10}),(0,e.createElement)("p",{className:`fw-normal panel-headline animate__animated animate__${M}`},__("Animate options","bootscore")),(0,e.createElement)(m,{label:__("Select animation","bootscore"),value:M,disabled:!C,__nextHasNoMarginBottom:!0,options:[{label:__("select","bootscore")+"...",value:""},{label:"bounce",value:"bounce"},{label:"flash",value:"flash"},{label:"pulse",value:"pulse"},{label:"rubberBand",value:"rubberBand"},{label:"shakeX",value:"shakeX"},{label:"headShake",value:"headShake"},{label:"swing",value:"swing"},{label:"tada",value:"tada"},{label:"wobble",value:"wobble"},{label:"jello",value:"jello"},{label:"heartBeat",value:"heartBeat"},{label:"---- BackIn",value:"",className:"SelectSeparator",disabled:!0},{label:"backInDown",value:"backInDown"},{label:"backInLeft",value:"backInLeft"},{label:"backInRight",value:"backInRight"},{label:"backInUp",value:"backInUp"},{label:"---- Bounce",value:"",className:"SelectSeparator",disabled:!0},{label:"bounceIn",value:"bounceIn"},{label:"bounceInDown",value:"bounceInDown"},{label:"bounceInLeft",value:"bounceInLeft"},{label:"bounceInRight",value:"bounceInRight"},{label:"bounceInUp",value:"bounceInUp"},{label:"---- Fade",value:"",className:"SelectSeparator",disabled:!0},{label:"fadeIn",value:"fadeIn"},{label:"fadeInDown",value:"fadeInDown"},{label:"fadeInDownBig",value:"fadeInDownBig"},{label:"fadeInLeft",value:"fadeInLeft"},{label:"fadeInLeftBig",value:"fadeInLeftBig"},{label:"fadeInRight",value:"fadeInRight"},{label:"fadeInRightBig",value:"fadeInRightBig"},{label:"fadeInUp",value:"fadeInUp"},{label:"fadeInUpBig",value:"fadeInUpBig"},{label:"fadeInTopLeft",value:"fadeInTopLeft"},{label:"fadeInTopRight",value:"fadeInTopRight"},{label:"fadeInBottomLeft",value:"fadeInBottomLeft"},{label:"fadeInBottomRight",value:"fadeInBottomRight"},{label:"---- Flip",value:"",className:"SelectSeparator",disabled:!0},{label:"flip",value:"flip"},{label:"flipInX",value:"flipInX"},{label:"flipInY",value:"flipInY"},{label:"flipOutX",value:"flipOutX"},{label:"flipOutY",value:"flipOutY"},{label:"---- Light Speed",value:"",className:"SelectSeparator",disabled:!0},{label:"lightSpeedInRight",value:"lightSpeedInRight"},{label:"lightSpeedInLeft",value:"lightSpeedInLeft"},{label:"lightSpeedOutRight",value:"lightSpeedOutRight"},{label:"lightSpeedOutLeft",value:"lightSpeedOutLeft"},{label:"---- Rotate",value:"",className:"SelectSeparator",disabled:!0},{label:"rotateIn",value:"rotateIn"},{label:"rotateInDownLeft",value:"rotateInDownLeft"},{label:"rotateInDownRight",value:"rotateInDownRight"},{label:"rotateInUpLeft",value:"rotateInUpLeft"},{label:"rotateInUpRight",value:"rotateInUpRight"},{label:"---- Zoom",value:"",className:"SelectSeparator",disabled:!0},{label:"zoomIn",value:"zoomIn"},{label:"zoomInDown",value:"zoomInDown"},{label:"zoomInLeft",value:"zoomInLeft"},{label:"zoomInRight",value:"zoomInRight"},{label:"zoomInUp",value:"zoomInUp"},{label:"---- Slide",value:"",className:"SelectSeparator",disabled:!0},{label:"slideInDown",value:"slideInDown"},{label:"slideInLeft",value:"slideInLeft"},{label:"slideInRight",value:"slideInRight"},{label:"slideInUp",value:"slideInUp"}],onChange:e=>h({animationType:e})}),(0,e.createElement)(u,{label:__("Aktion beim klicken","text-domain"),selected:R,__nextHasNoMarginBottom:!0,options:[{label:__("keine Aktion","text-domain"),value:""},{label:__("Lightbox","text-domain"),value:"lightbox"},{label:__("Individuell","text-domain"),value:"individuell"}],onChange:e=>h({clickAction:e})}),(0,e.createElement)("div",{className:"lightbox"===R?"":"d-none"},(0,e.createElement)(r,{label:__("Lightbox single","text-domain"),__nextHasNoMarginBottom:!0,checked:L,onChange:()=>h({lightboxSingle:!L})}))),(0,e.createElement)(o,{initialOpen:!1,title:__("Breakpoints","text-domain")},(0,e.createElement)("div",{className:"breakpoint-headline"},"Breakpoint XXL 1400px"),(0,e.createElement)(b,{gap:2,align:"center",justify:"center"},(0,e.createElement)(p,null,(0,e.createElement)(c,{label:"Columns",value:H.xxl.columns,__nextHasNoMarginBottom:!0,min:1,max:6,type:"number",onChange:e=>U(e,"columns","xxl")})),(0,e.createElement)(p,null,(0,e.createElement)(c,{label:"Gutter",value:H.xxl.gutter,__nextHasNoMarginBottom:!0,type:"number",onChange:e=>U(e,"gutter","xxl")}))),(0,e.createElement)("div",{className:"breakpoint-headline"},"Breakpoint XL 1200px"),(0,e.createElement)(b,{gap:2,align:"center",justify:"center"},(0,e.createElement)(p,null,(0,e.createElement)(c,{label:"Columns",value:H.xl.columns,__nextHasNoMarginBottom:!0,min:1,max:6,type:"number",onChange:e=>U(e,"columns","xl")})),(0,e.createElement)(p,null,(0,e.createElement)(c,{label:"Gutter",value:H.xl.gutter,__nextHasNoMarginBottom:!0,min:1,max:5,type:"number",onChange:e=>U(e,"gutter","xl")}))),(0,e.createElement)("div",{className:"breakpoint-headline"},"Breakpoint LG 992px"),(0,e.createElement)(b,{gap:2,align:"center",justify:"center"},(0,e.createElement)(p,null,(0,e.createElement)(c,{label:"Columns",value:H.lg.columns,__nextHasNoMarginBottom:!0,min:1,max:6,type:"number",onChange:e=>U(e,"columns","lg")})),(0,e.createElement)(p,null,(0,e.createElement)(c,{label:"Gutter",value:H.lg.gutter,__nextHasNoMarginBottom:!0,min:1,max:5,type:"number",onChange:e=>U(e,"gutter","lg")}))),(0,e.createElement)("div",{className:"breakpoint-headline"},"Breakpoint MD 768px"),(0,e.createElement)(b,{gap:2,align:"center",justify:"center"},(0,e.createElement)(p,null,(0,e.createElement)(c,{label:"Columns",value:H.md.columns,__nextHasNoMarginBottom:!0,min:1,max:6,type:"number",onChange:e=>U(e,"columns","md")})),(0,e.createElement)(p,null,(0,e.createElement)(c,{label:"Gutter",value:H.md.gutter,__nextHasNoMarginBottom:!0,min:1,max:5,type:"number",onChange:e=>U(e,"gutter","md")}))),(0,e.createElement)("div",{className:"breakpoint-headline"},"Breakpoint SM 576px"),(0,e.createElement)(b,{gap:2,align:"center",justify:"center"},(0,e.createElement)(p,null,(0,e.createElement)(c,{label:"Columns",value:H.sm.columns,__nextHasNoMarginBottom:!0,min:1,max:6,type:"number",onChange:e=>U(e,"columns","sm")})),(0,e.createElement)(p,null,(0,e.createElement)(c,{label:"Gutter",value:H.sm.gutter,__nextHasNoMarginBottom:!0,min:1,max:5,type:"number",onChange:e=>U(e,"gutter","sm")}))),(0,e.createElement)("div",{className:"breakpoint-headline"},"Breakpoint XS 450px"),(0,e.createElement)(b,{gap:2,align:"center",justify:"center"},(0,e.createElement)(p,null,(0,e.createElement)(c,{label:"Columns",value:H.xs.columns,__nextHasNoMarginBottom:!0,min:1,max:6,type:"number",onChange:e=>U(e,"columns","xs")})),(0,e.createElement)(p,null,(0,e.createElement)(c,{label:"Gutter",value:H.xs.gutter,__nextHasNoMarginBottom:!0,min:1,max:5,type:"number",onChange:e=>U(e,"gutter","xs")})))))),(0,e.createElement)("div",{className:"gallery-editor"},(0,e.createElement)("div",{style:{margin:"0 .5rem .5rem"}},"Theme Galerie"),y.length>0?(0,e.createElement)(f,null,(0,e.createElement)("ul",{className:"sortable-list list-unstyled row g-2"},y.map(((a,l)=>(0,e.createElement)("li",{key:a.id,className:"sortable-item col-auto","data-id":a.id},(0,e.createElement)("img",{src:a.url,alt:a.alt,className:"img-fluid rounded border",style:{height:"150px",width:"205px",objectFit:"cover"}}),(0,e.createElement)("div",null,(0,e.createElement)("button",{className:"btn btn-link text-decoration-none text-danger btn-sm mt-1",onClick:()=>(e=>{const a=y.filter(((a,l)=>l!==e));h({images:a})})(l)},"löschen"),"individuell"===R?(0,e.createElement)("button",{className:"btn btn-link text-primary text-decoration-none btn-sm mt-1",onClick:()=>(e=>{const a=y.find((({id:a})=>a===e));a&&(G({imageUrl:a.link||"",openTab:a.tab,editId:a.id}),z(!0))})(a.id)},"Optionen"):""))))),(0,e.createElement)("div",{className:"add-images-button"},(0,e.createElement)(i,{onSelect:e=>{const a=[...y,...e.map((e=>({id:e.id,link:"",tab:!1,url:e?.sizes?.[N]?.url||e?.url||"",alt:e.alt||"",title:e.caption||""})))];h({images:a})},allowedTypes:["image"],multiple:!0,render:({open:a})=>(0,e.createElement)(g,{onClick:a,variant:"primary",className:"add-images-button"},__("Bild hinzufügen","text-domain"))}))):(0,e.createElement)(n,{onSelect:e=>{h({images:e.map((e=>({id:e.id,link:"",tab:!1,url:e?.sizes?.[N]?.url||e?.url||"",alt:e.alt,title:e.caption||""})))})},allowedTypes:["image"],multiple:!0}),T&&(0,e.createElement)(d,{title:"Bildoptionen",onRequestClose:()=>z(!1)},(0,e.createElement)("div",null,(0,e.createElement)(c,{label:"Link-Url",value:A.imageUrl,__nextHasNoMarginBottom:!0,type:"text",onChange:e=>D(e,"imageUrl")}),(0,e.createElement)("div",{style:{margin:".5rem 0"}}),(0,e.createElement)(r,{label:__("in neuem Tab öffnen","text-domain"),__nextHasNoMarginBottom:!0,checked:A.openTab,onChange:e=>D(e,"openTab")})),(0,e.createElement)(g,{isPrimary:!0,onClick:()=>{const e=y.map((e=>e.id===A.editId?{...e,link:A.imageUrl,tab:A.openTab}:e));h({images:e}),z(!1)},style:{marginTop:"18px"}},"Speichern"))))},save({attributes:a}){const{images:l,galleryId:t,galleryType:n,repeatAnimation:i,imageCrop:o,imageWidth:r,imageHeight:m,lazyLoadAnimation:u,lightboxSingle:s,animationType:c,clickAction:g,breakpoints:d}=a;return l.length?(0,e.createElement)("div",{id:t,className:`theme-gallery-wrapper ${"lightbox"===g?"with-lightbox":""} ${"masonry"===n?"masonry-grid":""} ${u?"gallery-animation":""}`,"data-animation-active":u,"data-animation-type":c,"data-animation-repeat":i,"data-lightbox-single":s},(0,e.createElement)("div",{className:`row theme-gallery row-cols-${d.xs.columns} g-${d.xs.gutter} row-cols-xxl-${d.xxl.columns} g-xxl-${d.xxl.gutter} row-cols-xl-${d.xl.columns} g-xl-${d.xl.gutter} row-cols-lg-${d.lg.columns} g-lg-${d.lg.gutter} row-cols-md-${d.md.columns} g-md-${d.md.gutter} row-cols-sm-${d.sm.columns} g-sm-${d.sm.gutter}`},l.map(((a,l)=>(0,e.createElement)("div",{className:"col grid-item text-center ",key:l},(0,e.createElement)("div",{className:"d-inline-block image-wrapper w-100"},(0,e.createElement)("a",{target:a.tab?"_blank":"_self",href:"lightbox"===g?a.url:""!==a.link?a.link:"",className:"lightbox"===g||"individuell"===g&&""!==a.link?"cursor-pointer":"pe-none"},(0,e.createElement)("img",{className:"img-fluid rounded lazy-image "+(u?"":"no-animate"),style:{height:"masonry"!==n||o?m+"px":"100%",maxHeight:"100%",width:"100%",objectFit:"cover"},"data-src":a.url,alt:a.alt,title:a.caption,loading:"lazy"})))))))):(0,e.createElement)("div",{className:"fw-semibold"},(0,e.createElement)("i",{className:"bi bi-exclamation-triangle text-danger me-2"}),"keine Galerie gefunden...")}})})();