(()=>{"use strict";const e=window.ReactJSXRuntime,l={xxl:{columns:6,gutter:1},xl:{columns:5,gutter:1},lg:{columns:4,gutter:1},md:{columns:3,gutter:1},sm:{columns:2,gutter:1},xs:{columns:2,gutter:1}},{registerBlockType:a}=wp.blocks,{InspectorControls:t,MediaPlaceholder:n,MediaUploadCheck:i,MediaReplaceFlow:o,BlockControls:s,MediaUpload:r}=wp.blockEditor,{PanelBody:d,ToggleControl:m,SelectControl:u,RadioControl:g,RangeControl:c,TextControl:b,Button:p,Modal:x,Flex:h,FlexItem:v,ToolbarGroup:f,DropdownMenu:y,ResponsiveWrapper:j,ToolbarButton:I,ToolbarDropdownMenu:k}=wp.components,{__}=wp.i18n,{useEffect:_,useState:N,Fragment:B,useRef:C}=wp.element;a("hupa/theme-gallery",{title:"Theme Galerie",icon:"images-alt2",category:"theme-v3-medien",description:"Ein benutzerdefinierte Galerie mit Grid und Masonry-Grid.",attributes:{images:{type:"array",default:[]},imageSize:{type:"string",default:"large"},imageWidth:{type:"number",default:260},imageHeight:{type:"number",default:160},galleryType:{type:"string",default:"gallery"},imageCrop:{type:"boolean",default:!0},lazyLoad:{type:"boolean",default:!0},lazyLoadAnimation:{type:"boolean",default:!1},repeatAnimation:{type:"boolean",default:!1},animationType:{type:"string",default:""},galleryId:{type:"string",default:""},enableLightbox:{type:"boolean",default:!1},ausgabeOption:{type:"string",default:""},enableTitle:{type:"boolean",default:!0},clickAction:{type:"string",default:""},imgLink:{type:"string",default:""},lightboxSingle:{type:"boolean",default:!1},breakpoints:{type:"object",default:{xxl:{columns:6,gutter:1},xl:{columns:5,gutter:1},lg:{columns:4,gutter:1},md:{columns:3,gutter:1},sm:{columns:2,gutter:1},xs:{columns:2,gutter:1}}}},edit({attributes:a,setAttributes:i}){const{images:o,galleryId:y,galleryType:j,repeatAnimation:k,imageSize:C,imageCrop:w,lazyLoad:S,imageWidth:L,ausgabeOption:M,enableTitle:T,imageHeight:R,lazyLoadAnimation:H,lightboxSingle:z,animationType:U,clickAction:A,breakpoints:G}=a;if(!y){const e=`gallery-${Math.random().toString(36).slice(2,9)}`;i({galleryId:e})}const[D,$]=N(!1),O=(e,l,t)=>{const n={...a.breakpoints};n[t]={...n[t],[l]:parseInt(e)},i({breakpoints:n})};_((()=>{o.length>0&&document.querySelectorAll(".sortable-list").forEach((e=>{jQuery(e).sortable({update:(l,a)=>{const t=jQuery(e).sortable("toArray",{attribute:"data-id"}).map((e=>parseInt(e,10))).map((e=>o.find((l=>l.id===e))));i({images:t})}})}))}),[o]),_((()=>{G&&0!==Object.keys(G).length||i({breakpoints:l})}),[G,i]);const[X,F]=N({imageUrl:"",openTab:!1,editId:null}),E=(e,l)=>{const a={...X};a[l]=e,F(a)};return(0,e.jsxs)(B,{children:[(0,e.jsx)(s,{children:(0,e.jsx)(f,{children:(0,e.jsx)(r,{onSelect:e=>{const l=e.map((e=>({id:e.id,link:"",tab:!1,url:e?.sizes?.[C]?.url||e.url,alt:e.alt||"",title:e.caption||""})));i({images:l})},allowedTypes:["image"],multiple:!0,gallery:!0,value:o.map((e=>e.id)),render:({open:l})=>(0,e.jsx)(I,{icon:"images-alt2",text:"Galerie bearbeiten",label:"Galerie bearbeiten",onClick:l})})})}),(0,e.jsx)(t,{children:(0,e.jsxs)("div",{className:"gallery-sidebar",children:[(0,e.jsxs)(d,{title:__("Galerie Settings","text-domain"),children:[(0,e.jsx)(u,{label:"Galerie Typ",__nextHasNoMarginBottom:!0,value:j,options:[{label:"Galerie Grid",value:"gallery"},{label:"Masonry Grid",value:"masonry"}],onChange:e=>i({galleryType:e})}),(0,e.jsx)(u,{label:"Image Size",__nextHasNoMarginBottom:!0,value:C,options:[{label:"Thumbnail",value:"thumbnail"},{label:"Medium",value:"medium"},{label:"Large",value:"large"},{label:"Full",value:"full"}],onChange:e=>i({imageSize:e})}),(0,e.jsx)(m,{label:"Image Crop",__nextHasNoMarginBottom:!0,checked:w,onChange:e=>i({imageCrop:e})}),(0,e.jsx)(m,{label:"Lazy load animation",__nextHasNoMarginBottom:!0,checked:H,onChange:e=>i({lazyLoadAnimation:e})}),(0,e.jsx)(m,{label:"Animation wiederholen",__nextHasNoMarginBottom:!0,disabled:!H,checked:k,onChange:e=>i({repeatAnimation:e})}),(0,e.jsx)(g,{label:__("Ausgabe Option","text-domain"),selected:M,__nextHasNoMarginBottom:!0,options:[{label:__("keine Aktion","text-domain"),value:""},{label:__("Caption anzeigen","text-domain"),value:"caption"}],onChange:e=>i({ausgabeOption:e})}),(0,e.jsx)(m,{label:"Titel anzeigen",__nextHasNoMarginBottom:!0,checked:T,onChange:e=>i({enableTitle:e})}),(0,e.jsx)(c,{label:"Image Height (px)",__nextHasNoMarginBottom:!0,value:R,disabled:!w&&"gallery"!==j,onChange:e=>i({imageHeight:e}),min:50,max:500,step:10}),(0,e.jsx)("p",{className:`fw-normal panel-headline animate__animated animate__${U}`,children:__("Animate options","bootscore")}),(0,e.jsx)(u,{label:__("Select animation","bootscore"),value:U,disabled:!H,__nextHasNoMarginBottom:!0,options:[{label:__("select","bootscore")+"...",value:""},{label:"bounce",value:"bounce"},{label:"flash",value:"flash"},{label:"pulse",value:"pulse"},{label:"rubberBand",value:"rubberBand"},{label:"shakeX",value:"shakeX"},{label:"headShake",value:"headShake"},{label:"swing",value:"swing"},{label:"tada",value:"tada"},{label:"wobble",value:"wobble"},{label:"jello",value:"jello"},{label:"heartBeat",value:"heartBeat"},{label:"---- BackIn",value:"",className:"SelectSeparator",disabled:!0},{label:"backInDown",value:"backInDown"},{label:"backInLeft",value:"backInLeft"},{label:"backInRight",value:"backInRight"},{label:"backInUp",value:"backInUp"},{label:"---- Bounce",value:"",className:"SelectSeparator",disabled:!0},{label:"bounceIn",value:"bounceIn"},{label:"bounceInDown",value:"bounceInDown"},{label:"bounceInLeft",value:"bounceInLeft"},{label:"bounceInRight",value:"bounceInRight"},{label:"bounceInUp",value:"bounceInUp"},{label:"---- Fade",value:"",className:"SelectSeparator",disabled:!0},{label:"fadeIn",value:"fadeIn"},{label:"fadeInDown",value:"fadeInDown"},{label:"fadeInDownBig",value:"fadeInDownBig"},{label:"fadeInLeft",value:"fadeInLeft"},{label:"fadeInLeftBig",value:"fadeInLeftBig"},{label:"fadeInRight",value:"fadeInRight"},{label:"fadeInRightBig",value:"fadeInRightBig"},{label:"fadeInUp",value:"fadeInUp"},{label:"fadeInUpBig",value:"fadeInUpBig"},{label:"fadeInTopLeft",value:"fadeInTopLeft"},{label:"fadeInTopRight",value:"fadeInTopRight"},{label:"fadeInBottomLeft",value:"fadeInBottomLeft"},{label:"fadeInBottomRight",value:"fadeInBottomRight"},{label:"---- Flip",value:"",className:"SelectSeparator",disabled:!0},{label:"flip",value:"flip"},{label:"flipInX",value:"flipInX"},{label:"flipInY",value:"flipInY"},{label:"flipOutX",value:"flipOutX"},{label:"flipOutY",value:"flipOutY"},{label:"---- Light Speed",value:"",className:"SelectSeparator",disabled:!0},{label:"lightSpeedInRight",value:"lightSpeedInRight"},{label:"lightSpeedInLeft",value:"lightSpeedInLeft"},{label:"lightSpeedOutRight",value:"lightSpeedOutRight"},{label:"lightSpeedOutLeft",value:"lightSpeedOutLeft"},{label:"---- Rotate",value:"",className:"SelectSeparator",disabled:!0},{label:"rotateIn",value:"rotateIn"},{label:"rotateInDownLeft",value:"rotateInDownLeft"},{label:"rotateInDownRight",value:"rotateInDownRight"},{label:"rotateInUpLeft",value:"rotateInUpLeft"},{label:"rotateInUpRight",value:"rotateInUpRight"},{label:"---- Zoom",value:"",className:"SelectSeparator",disabled:!0},{label:"zoomIn",value:"zoomIn"},{label:"zoomInDown",value:"zoomInDown"},{label:"zoomInLeft",value:"zoomInLeft"},{label:"zoomInRight",value:"zoomInRight"},{label:"zoomInUp",value:"zoomInUp"},{label:"---- Slide",value:"",className:"SelectSeparator",disabled:!0},{label:"slideInDown",value:"slideInDown"},{label:"slideInLeft",value:"slideInLeft"},{label:"slideInRight",value:"slideInRight"},{label:"slideInUp",value:"slideInUp"}],onChange:e=>i({animationType:e})}),(0,e.jsx)(g,{label:__("Aktion beim klicken","text-domain"),selected:A,__nextHasNoMarginBottom:!0,options:[{label:__("keine Aktion","text-domain"),value:""},{label:__("Lightbox","text-domain"),value:"lightbox"},{label:__("Individuell","text-domain"),value:"individuell"}],onChange:e=>i({clickAction:e})}),(0,e.jsx)("div",{className:"lightbox"===A?"":"d-none",children:(0,e.jsx)(m,{label:__("Lightbox single","text-domain"),__nextHasNoMarginBottom:!0,checked:z,onChange:()=>i({lightboxSingle:!z})})})]}),(0,e.jsxs)(d,{initialOpen:!1,title:__("Breakpoints","text-domain"),children:[(0,e.jsx)("div",{className:"breakpoint-headline",children:"Breakpoint XXL 1400px"}),(0,e.jsxs)(h,{gap:2,align:"center",justify:"center",children:[(0,e.jsx)(v,{children:(0,e.jsx)(b,{label:"Columns",value:G.xxl.columns,__nextHasNoMarginBottom:!0,min:1,max:6,type:"number",onChange:e=>O(e,"columns","xxl")})}),(0,e.jsx)(v,{children:(0,e.jsx)(b,{label:"Gutter",value:G.xxl.gutter,__nextHasNoMarginBottom:!0,type:"number",onChange:e=>O(e,"gutter","xxl")})})]}),(0,e.jsx)("div",{className:"breakpoint-headline",children:"Breakpoint XL 1200px"}),(0,e.jsxs)(h,{gap:2,align:"center",justify:"center",children:[(0,e.jsx)(v,{children:(0,e.jsx)(b,{label:"Columns",value:G.xl.columns,__nextHasNoMarginBottom:!0,min:1,max:6,type:"number",onChange:e=>O(e,"columns","xl")})}),(0,e.jsx)(v,{children:(0,e.jsx)(b,{label:"Gutter",value:G.xl.gutter,__nextHasNoMarginBottom:!0,min:1,max:5,type:"number",onChange:e=>O(e,"gutter","xl")})})]}),(0,e.jsx)("div",{className:"breakpoint-headline",children:"Breakpoint LG 992px"}),(0,e.jsxs)(h,{gap:2,align:"center",justify:"center",children:[(0,e.jsx)(v,{children:(0,e.jsx)(b,{label:"Columns",value:G.lg.columns,__nextHasNoMarginBottom:!0,min:1,max:6,type:"number",onChange:e=>O(e,"columns","lg")})}),(0,e.jsx)(v,{children:(0,e.jsx)(b,{label:"Gutter",value:G.lg.gutter,__nextHasNoMarginBottom:!0,min:1,max:5,type:"number",onChange:e=>O(e,"gutter","lg")})})]}),(0,e.jsx)("div",{className:"breakpoint-headline",children:"Breakpoint MD 768px"}),(0,e.jsxs)(h,{gap:2,align:"center",justify:"center",children:[(0,e.jsx)(v,{children:(0,e.jsx)(b,{label:"Columns",value:G.md.columns,__nextHasNoMarginBottom:!0,min:1,max:6,type:"number",onChange:e=>O(e,"columns","md")})}),(0,e.jsx)(v,{children:(0,e.jsx)(b,{label:"Gutter",value:G.md.gutter,__nextHasNoMarginBottom:!0,min:1,max:5,type:"number",onChange:e=>O(e,"gutter","md")})})]}),(0,e.jsx)("div",{className:"breakpoint-headline",children:"Breakpoint SM 576px"}),(0,e.jsxs)(h,{gap:2,align:"center",justify:"center",children:[(0,e.jsx)(v,{children:(0,e.jsx)(b,{label:"Columns",value:G.sm.columns,__nextHasNoMarginBottom:!0,min:1,max:6,type:"number",onChange:e=>O(e,"columns","sm")})}),(0,e.jsx)(v,{children:(0,e.jsx)(b,{label:"Gutter",value:G.sm.gutter,__nextHasNoMarginBottom:!0,min:1,max:5,type:"number",onChange:e=>O(e,"gutter","sm")})})]}),(0,e.jsx)("div",{className:"breakpoint-headline",children:"Breakpoint XS 450px"}),(0,e.jsxs)(h,{gap:2,align:"center",justify:"center",children:[(0,e.jsx)(v,{children:(0,e.jsx)(b,{label:"Columns",value:G.xs.columns,__nextHasNoMarginBottom:!0,min:1,max:6,type:"number",onChange:e=>O(e,"columns","xs")})}),(0,e.jsx)(v,{children:(0,e.jsx)(b,{label:"Gutter",value:G.xs.gutter,__nextHasNoMarginBottom:!0,min:1,max:5,type:"number",onChange:e=>O(e,"gutter","xs")})})]})]})]})}),(0,e.jsxs)("div",{className:"gallery-editor",children:[(0,e.jsx)("div",{style:{margin:"0 .5rem .5rem"},children:"Theme Galerie"}),o.length>0?(0,e.jsx)(B,{children:(0,e.jsx)("ul",{className:"sortable-list list-unstyled row g-2",children:o.map(((l,a)=>(0,e.jsxs)("li",{className:"sortable-item col-auto","data-id":l.id,children:[(0,e.jsx)("img",{src:l.url,alt:l.alt,className:"img-fluid rounded border",style:{height:"150px",width:"205px",objectFit:"cover"}}),(0,e.jsxs)("div",{children:[(0,e.jsx)("button",{className:"btn btn-link text-decoration-none text-danger btn-sm mt-1",onClick:()=>(e=>{const l=o.filter(((l,a)=>a!==e));i({images:l})})(a),children:"löschen"}),"individuell"===A?(0,e.jsx)("button",{className:"btn btn-link text-primary text-decoration-none btn-sm mt-1",onClick:()=>(e=>{const l=o.find((({id:l})=>l===e));l&&(F({imageUrl:l.link||"",openTab:l.tab,editId:l.id}),$(!0))})(l.id),children:"Optionen"}):""]})]},l.id)))})}):(0,e.jsx)(n,{onSelect:e=>{i({images:e.map((e=>({id:e.id,link:"",tab:!1,url:e?.sizes?.[C]?.url||e?.url||"",alt:e.alt,title:e.caption||""})))})},allowedTypes:["image"],multiple:!0}),D&&(0,e.jsxs)(x,{title:"Bildoptionen",onRequestClose:()=>$(!1),children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(b,{label:"Link-Url",value:X.imageUrl,__nextHasNoMarginBottom:!0,type:"text",onChange:e=>E(e,"imageUrl")}),(0,e.jsx)("div",{style:{margin:".5rem 0"}}),(0,e.jsx)(m,{label:__("in neuem Tab öffnen","text-domain"),__nextHasNoMarginBottom:!0,checked:X.openTab,onChange:e=>E(e,"openTab")})]}),(0,e.jsx)(p,{isPrimary:!0,onClick:()=>{const e=o.map((e=>e.id===X.editId?{...e,link:X.imageUrl,tab:X.openTab}:e));i({images:e}),$(!1)},style:{marginTop:"18px"},children:"Speichern"})]})]})]})},save({attributes:l}){const{images:a,galleryId:t,galleryType:n,repeatAnimation:i,imageCrop:o,imageWidth:s,ausgabeOption:r,enableTitle:d,imageHeight:m,lazyLoadAnimation:u,lightboxSingle:g,animationType:c,clickAction:b,breakpoints:p}=l;return a.length?(0,e.jsx)("div",{id:t,className:`theme-gallery-wrapper ${"lightbox"===b?"with-lightbox":""} ${"masonry"===n?"masonry-grid":""} ${u?"gallery-animation":""}`,"data-animation-active":u,"data-animation-type":c,"data-animation-repeat":i,"data-lightbox-single":g,children:(0,e.jsx)("div",{className:`row theme-gallery row-cols-${p.xs.columns} g-${p.xs.gutter} row-cols-xxl-${p.xxl.columns} g-xxl-${p.xxl.gutter} row-cols-xl-${p.xl.columns} g-xl-${p.xl.gutter} row-cols-lg-${p.lg.columns} g-lg-${p.lg.gutter} row-cols-md-${p.md.columns} g-md-${p.md.gutter} row-cols-sm-${p.sm.columns} g-sm-${p.sm.gutter}`,children:a.map(((l,a)=>(0,e.jsx)("div",{className:"col grid-item text-center ",children:(0,e.jsxs)("div",{className:"d-inline-block image-wrapper w-100",children:[(0,e.jsx)("a",{title:d?l.title:"",target:l.tab?"_blank":"_self",href:"lightbox"===b?l.url:""!==l.link?l.link:"",className:"lightbox"===b||"individuell"===b&&""!==l.link?"cursor-pointer":"pe-none",children:(0,e.jsx)("img",{className:"img-fluid rounded lazy-image "+(u?"":"no-animate"),style:{height:"masonry"!==n||o?m+"px":"100%",maxHeight:"100%",width:"100%",objectFit:"cover"},"data-src":l.url,alt:l.alt?l.alt:l.title,title:"caption"===r?l.title:"",loading:"lazy"})}),"caption"===r?(0,e.jsxs)("div",{className:"gallery-item-caption",children:[" ",l.title]}):""]})},a)))})}):(0,e.jsxs)("div",{className:"fw-semibold",children:[(0,e.jsx)("i",{className:"bi bi-exclamation-triangle text-danger me-2"}),"keine Galerie gefunden..."]})}})})();