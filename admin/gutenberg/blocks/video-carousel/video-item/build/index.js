(()=>{"use strict";const e=window.ReactJSXRuntime,t=window.wp.data,{registerBlockType:i}=wp.blocks,{__}=wp.i18n,{Fragment:o}=wp.element,{PanelBody:a,ToggleControl:s,RadioControl:l,ResponsiveWrapper:d,Button:r,SelectControl:n,Flex:c,FlexItem:m,TextControl:u}=wp.components,{MediaUpload:x,MediaUploadCheck:h,InnerBlocks:p,useBlockProps:v,InspectorControls:g,RichText:b}=wp.blockEditor;i("hupa/video-carousel-item",{title:__("Video Item","bootscore"),icon:()=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"21",fill:"currentColor",className:"bi bi-play",viewBox:"0 0 16 16",children:(0,e.jsx)("path",{d:"M10.804 8 5 4.633v6.734zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696z"})}),category:"media",parent:["hupa/video-carousel-container"],supports:{reusable:!1},attributes:{itemId:{type:"string",default:""},imageSize:{type:"string",default:"large"},videoMuted:{type:"bool",default:!1},videoAutoPlay:{type:"bool",default:!1},videoControls:{type:"bool",default:!0},videoStartTime:{type:"number",default:0},postId:{type:"number",default:0},externesCoverImgAktiv:{type:"bool",default:!1},mediaData:{type:"object",default:{}},mediaVideoData:{type:"object",default:{}},selectedExternSourceType:{type:"string",default:"link"},externLinkMimeType:{type:"string",default:""},externVideoId:{type:"string",default:""},externVideoUrl:{type:"string",default:""},selectedSourceType:{type:"string",default:"mediathek"},videoTitelAktiv:{type:"bool",default:!0},customVideoTitel:{type:"string",default:""}},edit({attributes:i,setAttributes:p}){const{itemId:b,externesCoverImgAktiv:j,videoMuted:y,videoAutoPlay:k,videoControls:C,videoStartTime:_,mediaData:T,imageSize:V,mediaVideoData:f,externLinkMimeType:N,selectedExternSourceType:w,externVideoId:M,externVideoUrl:S,selectedSourceType:I,videoTitelAktiv:B,customVideoTitel:z}=i;if(!b){const e=`item-${Math.random().toString(36).slice(2,9)}`;p({itemId:e})}const A=(0,t.select)("core/editor").getCurrentPostId();p({postId:A});const L=v({className:"hupa-video-carousel-item"}),D=({color:t})=>(0,e.jsx)("hr",{className:"hr-small-trenner"});return(0,e.jsxs)(o,{children:[(0,e.jsxs)(g,{children:[(0,e.jsx)(a,{title:__("Video Cover Image","bootscore"),initialOpen:!0,children:(0,e.jsxs)("div",{className:"image-upload-wrapper editor-post-featured-image__container",children:[(0,e.jsxs)("div",{className:"editor-controls",children:[T.id?(0,e.jsxs)(o,{children:[(0,e.jsx)(d,{naturalWidth:T.width,naturalHeight:T.height,children:(0,e.jsx)("img",{style:{height:"160px",objectFit:"cover",width:"100%"},src:T.url,alt:"Video Cover"})}),(0,e.jsx)(r,{isDestructive:!0,onClick:()=>{p({mediaData:{}})},className:"editor-controls",children:"entfernen"})]}):(0,e.jsx)(h,{children:(0,e.jsx)(x,{onSelect:e=>{const t={id:e.id,url:e.sizes[V]?.url||e.url,alt:e.alt,width:e.width,height:e.height,mimeType:e.mime};p({mediaData:t})},allowedTypes:["image"],render:({open:t})=>(0,e.jsx)(r,{isPrimary:!0,onClick:t,children:"Cover hinzufügen"})})}),(0,e.jsx)("hr",{style:{margin:".5rem 0 1rem 0"}})]}),(0,e.jsx)(n,{label:"Image Size",value:V,disabled:!T.id,__nextHasNoMarginBottom:!0,options:[{label:"Thumbnail",value:"thumbnail"},{label:"Medium",value:"medium"},{label:"Large",value:"large"},{label:"Full",value:"full"}],onChange:e=>{return t=e,void(T.id&&wp.apiFetch({path:`/wp/v2/media/${T.id}`,method:"GET"}).then((e=>{if(e&&e.media_details){let i=e.media_details,o=e.source_url;switch(t){case"thumbnail":i.sizes&&i.sizes.thumbnail&&(o=i.sizes.thumbnail.source_url);break;case"medium":i.sizes&&i.sizes.medium&&(o=i.sizes.medium.source_url);break;case"large":i.sizes&&i.sizes.medium_large&&(o=i.sizes.medium_large.source_url);break;case"full":o=e.source_url}let a=T;a.url=o,p({mediaData:a,imageSize:t})}})));var t}})]})}),(0,e.jsxs)(a,{title:__("Video Source","bootscore"),initialOpen:!0,children:[(0,e.jsxs)("div",{className:"video-upload-wrapper",children:[(0,e.jsxs)(c,{gap:2,align:"center",justify:"center",children:[(0,e.jsx)(m,{children:(0,e.jsx)(r,{className:"mediathek"===I?"btn-sidebar active":"btn-sidebar",onClick:()=>p({selectedSourceType:"mediathek"}),variant:"secondary",isLarge:!0,children:__("Mediathek","bootscore")})}),(0,e.jsx)(m,{children:(0,e.jsx)(r,{className:"extern"===I?"btn-sidebar active":"btn-sidebar",onClick:()=>p({selectedSourceType:"extern",videoTitelAktiv:!1}),variant:"secondary",isLarge:!0,children:__("Externer Anbieter","bootscore")})})]}),(0,e.jsxs)("div",{className:"body-group",children:[(0,e.jsx)(D,{}),(0,e.jsx)(s,{label:__("Videotitel verwenden","bootscore"),disabled:"extern"===I,checked:B,__nextHasNoMarginBottom:!0,onChange:e=>p({videoTitelAktiv:e})})]}),(0,e.jsxs)("div",{className:B?"block-none":"body-group",children:[(0,e.jsx)(u,{label:__("Video Titel","bootscore"),value:z,__nextHasNoMarginBottom:!0,type:"text",onChange:e=>p({customVideoTitel:e})}),(0,e.jsx)(D,{})]}),(0,e.jsxs)("div",{className:"mediathek"===I?"block-none":"",children:[(0,e.jsx)(l,{label:"Video Link Source",selected:w,__nextHasNoMarginBottom:!0,options:[{label:"Link",value:"link"},{label:"YouTube",value:"youtube"},{label:"Vimeo",value:"vimeo"}],onChange:e=>{p({selectedExternSourceType:e})}}),(0,e.jsxs)("div",{className:["youtube","vimeo"].includes(w)?"":"block-none",children:[(0,e.jsx)(D,{}),(0,e.jsx)(s,{label:__("Externes Cover Bild verwenden","bootscore"),checked:j,__nextHasNoMarginBottom:!0,onChange:e=>p({externesCoverImgAktiv:e})}),(0,e.jsx)(D,{}),(0,e.jsx)(u,{label:__("Video ID","bootscore")+":",value:M,__nextHasNoMarginBottom:!0,type:"text",onChange:e=>p({externVideoId:e})})]}),(0,e.jsxs)("div",{className:"link"===w?"":"block-none",children:[(0,e.jsx)(u,{label:__("Video URL","bootscore")+":",value:S,__nextHasNoMarginBottom:!0,type:"text",onChange:e=>p({externVideoUrl:e})}),(0,e.jsx)(u,{label:__("Video Mime Type","bootscore")+":",value:N,__nextHasNoMarginBottom:!0,type:"text",onChange:e=>p({externLinkMimeType:e})})]})]})]}),(0,e.jsx)("div",{className:"editor-controls",children:(0,e.jsxs)("div",{className:"extern"===I?"block-none":"",children:[(0,e.jsx)(h,{children:(0,e.jsx)(x,{onSelect:e=>{let t;t=e.title?e.title:"kein Titel";const i={id:e.id,url:e.url,width:e.width,height:e.height,title:t,fileLength:e.fileLength,mimeType:e.mime,mediaIcon:e.icon};p({mediaVideoData:i})},allowedTypes:["video"],render:({open:t})=>(0,e.jsxs)(r,{className:f?"editor-post-featured-image__preview":"editor-post-featured-image__toggle",onClick:t,children:[!f.id&&__("Video","bootscore"),f.id&&(0,e.jsx)(o,{children:(0,e.jsxs)("div",{className:"videoBtnSelect",children:[(0,e.jsx)("img",{style:{height:"80px",width:"60px",padding:"10px"},alt:"Video Cover",src:f.mediaIcon}),(0,e.jsxs)("p",{children:[f.title,(0,e.jsx)("br",{})," Länge: ",f.fileLength]})]})})]})})}),f.id&&(0,e.jsx)(h,{children:(0,e.jsx)(r,{onClick:()=>p({mediaVideoData:{}}),isLink:!0,isDestructive:!0,children:__("Video entfernen","bootscore")})})]})})]}),(0,e.jsxs)(a,{title:__("Video Einstellungen","bootscore"),initialOpen:!0,children:[(0,e.jsx)(D,{}),(0,e.jsx)(s,{disabled:"extern"===I,label:__("Video muted","bootscore"),checked:y,__nextHasNoMarginBottom:!0,onChange:e=>(e=>{let t;t=!!e&&k,p({videoMuted:e,videoAutoPlay:t})})(e)}),(0,e.jsx)(s,{disabled:"extern"===I,label:__("Video controls","bootscore"),checked:C,__nextHasNoMarginBottom:!0,onChange:e=>p({videoControls:e})}),(0,e.jsx)(s,{disabled:"extern"===I,label:__("Video autoplay","bootscore"),checked:k,__nextHasNoMarginBottom:!0,onChange:e=>(e=>{let t;t=!!e||y,p({videoMuted:t,videoAutoPlay:e})})(e)}),(0,e.jsx)(D,{}),(0,e.jsx)(u,{disabled:"extern"===I,label:__("Video Startzeit (sek)","bootscore")+":",value:parseInt(_),__nextHasNoMarginBottom:!0,min:0,type:"number",onChange:e=>p({videoStartTime:parseInt(e)})})]})]}),(0,e.jsx)("div",{...L,children:(0,e.jsx)("div",{className:" video-item bg-white p-2",children:(0,e.jsx)("div",{className:"video-cover",children:T.id?(0,e.jsx)("img",{className:"img-fluid rounded",alt:"Video Carousel",src:`${T.url}`}):(0,e.jsx)("img",{className:"img-fluid rounded",alt:"Video Carousel",src:`${hummeltRestEditorObj.admin_url}assets/images/video-placeholder.jpg`})})})})]})},save({attributes:t}){const{itemId:i,externesCoverImgAktiv:o,mediaData:a,videoMuted:s,videoControls:l,videoStartTime:d,videoAutoPlay:r,mediaVideoData:n,externLinkMimeType:c,selectedExternSourceType:m,externVideoId:u,externVideoUrl:x,selectedSourceType:h,videoTitelAktiv:p,customVideoTitel:v}=t;return(0,e.jsx)("div",{id:i,"data-title-aktiv":p,"data-item-id":i,"data-extern-cover-img-active":o,"data-media":JSON.stringify(a),"data-video":JSON.stringify(n),"data-extern-source-type":m,"data-extern-video-id":u,"data-extern-video-url":x,"data-source-type":h,"data-custom-title":v,"data-extern-mime":c,"data-muted":s,"data-controls":l,"data-start-time":parseInt(d),"data-auto-play":r})}})})();