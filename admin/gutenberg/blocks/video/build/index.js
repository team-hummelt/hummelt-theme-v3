(()=>{"use strict";const e=window.ReactJSXRuntime,t=()=>(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",className:"bi bi-play-btn",viewBox:"0 0 16 16",children:[(0,e.jsx)("path",{d:"M6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"}),(0,e.jsx)("path",{d:"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm15 0a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"})]}),{MediaUpload:i,MediaUploadCheck:s}=wp.blockEditor,{Component:o}=wp.element,{withDispatch:d,withSelect:n,select:a}=wp.data,{__}=wp.i18n,{compose:r}=wp.compose,{Button:p,ResponsiveWrapper:l}=wp.components;class h extends o{constructor(e){super(...arguments),this.props=e,this.state={media:[]},this.onSelectMedia=this.onSelectMedia.bind(this),this.getMediaData=this.getMediaData.bind(this),this.getStateMedia=this.getStateMedia.bind(this),this.onRemoveMedia=this.onRemoveMedia.bind(this)}onSelectMedia(e){this.setState({media:e});let t={id:e.id,url:e.url,width:e.width,height:e.height,mimeType:e.mime};this.props.OnUpdateMediaData(this.props.mediaData=JSON.stringify(t))}onRemoveMedia(){this.props.OnUpdateMediaData(this.props.mediaData=JSON.stringify({id:"",url:"",width:"",height:"",mimeType:""}))}getMediaData(){return JSON.parse(this.props.mediaData)}getStateMedia(){return this.state.media}render(){const t=this.getMediaData(),o=this.getStateMedia();return(0,e.jsxs)("div",{className:"image-upload-wrapper editor-post-featured-image__container",children:[(0,e.jsx)(s,{children:(0,e.jsx)(i,{onSelect:this.onSelectMedia,allowedTypes:["image"],render:({open:i})=>(0,e.jsxs)(p,{className:0==t.id?"editor-post-featured-image__toggle":"editor-post-featured-image__preview",onClick:i,children:[0==t.id&&__("Video-Cover Bild","bootscore"),null!=o.media&&(0,e.jsx)(l,{naturalWidth:o.media.width,naturalHeight:o.media.height,children:(0,e.jsx)("img",{src:o.media.url,alt:"Video Cover"})}),t.id?(0,e.jsx)(l,{naturalWidth:t.width,naturalHeight:t.height,children:(0,e.jsx)("img",{alt:"Video Cover",src:t.url})}):""]})})}),t.id?(0,e.jsx)("div",{className:"replace-wrapper",children:(0,e.jsx)(s,{children:(0,e.jsx)(i,{onSelect:this.onSelectMedia,value:t.id,allowedTypes:["image"],__nextHasNoMarginBottom:!0,render:({open:t})=>(0,e.jsx)(p,{className:"btn-sidebar",onClick:t,variant:"secondary",isLarge:!0,children:__("Bild ersetzen","bootscore")})})})}):"",0!=t.id&&(0,e.jsx)("div",{className:"remove-wrapper",children:(0,e.jsx)(s,{children:(0,e.jsx)(p,{onClick:this.onRemoveMedia,isLink:!0,__nextHasNoMarginBottom:!0,isDestructive:!0,children:__("Cover Bild entfernen","bootscore")})})})]})}}const c=window.wp.components,{MediaUpload:x,MediaUploadCheck:u}=wp.blockEditor,{Component:m}=wp.element,{withDispatch:g,withSelect:v,select:V}=wp.data,{__:b}=wp.i18n,{compose:C}=wp.compose,{Button:S}=wp.components;class T extends m{constructor(e){super(...arguments),this.props=e,this.state={videoMedia:[]},this.onChangExternVideoId=this.onChangExternVideoId.bind(this),this.onChangeSelectedExternVideoSource=this.onChangeSelectedExternVideoSource.bind(this),this.onChangExternVideoUrl=this.onChangExternVideoUrl.bind(this),this.onChangeVideoSource=this.onChangeVideoSource.bind(this),this.onSelectVideoMedia=this.onSelectVideoMedia.bind(this),this.onRemoveVideoMedia=this.onRemoveVideoMedia.bind(this),this.getVideoMediaData=this.getVideoMediaData.bind(this),this.getVideoStateMedia=this.getVideoStateMedia.bind(this),this.onSetCurrentPostId=this.onSetCurrentPostId.bind(this),this.onChangeExternImgAktiv=this.onChangeExternImgAktiv.bind(this),this.onChangeVideoTitelAktiv=this.onChangeVideoTitelAktiv.bind(this),this.onChangeCustomVideoTitel=this.onChangeCustomVideoTitel.bind(this)}onSelectVideoMedia(e){let t;this.setState({videoMedia:e}),t=e.title?e.title:"kein Titel";let i={id:e.id,url:e.url,width:e.width,height:e.height,title:t,fileLength:e.fileLength,mimeType:e.mime,mediaIcon:e.icon};this.props.OnUpdateMediaVideoData(this.props.mediaVideoData=JSON.stringify(i))}onRemoveVideoMedia(){this.props.OnUpdateMediaVideoData(this.props.mediaVideoData=JSON.stringify({id:"",url:"",width:"",height:"",title:"",fileLength:"",mimeType:"",mediaIcon:""}))}getVideoMediaData(){return JSON.parse(this.props.mediaVideoData)}getVideoStateMedia(){return this.state.videoMedia}onChangeSelectedExternVideoSource(e){["youtube","vimeo"].includes(this.props.selectedExternSourceType)&&this.props.OnUpdateExternVideoId(this.props.externVideoId=""),this.props.OnUpdateSelectedExternSourceType(this.props.selectedExternSourceType=e)}onChangExternVideoId(e){this.props.OnUpdateExternVideoId(this.props.externVideoId=e)}onChangExternVideoUrl(e){this.props.OnUpdateExternVideoUrl(this.props.externVideoUrl=e)}onChangeVideoSource(e){this.props.OnUpdateSourceType(this.props.selectedSourceType=e)}onSetCurrentPostId(){const e=V("core/editor").getCurrentPostId();this.props.OnUpdatePostId(this.props.postId=e)}onChangeExternImgAktiv(e){this.props.OnUpdateExternesCoverImgAktiv(this.props.externesCoverImgAktiv=e)}onChangeVideoTitelAktiv(e){this.props.OnUpdateVideoTitelAktiv(this.props.videoTitelAktiv=e)}onChangeCustomVideoTitel(e){this.props.OnUpdateCustomVideoTitel(this.props.customVideoTitel=e)}render(){const t=this.getVideoMediaData(),i=this.getVideoStateMedia(),s=({color:t})=>(0,e.jsx)("hr",{className:"hr-small-trenner"});return this.onSetCurrentPostId(),(0,e.jsxs)("div",{className:"video-upload-wrapper",children:[(0,e.jsxs)(c.Flex,{gap:2,align:"center",justify:"center",children:[(0,e.jsx)(c.FlexItem,{children:(0,e.jsx)(S,{className:"mediathek"===this.props.selectedSourceType?"btn-sidebar active":"btn-sidebar",onClick:e=>this.onChangeVideoSource("mediathek"),variant:"secondary",isLarge:!0,children:b("Mediathek","bootscore")})}),(0,e.jsx)(c.FlexItem,{children:(0,e.jsx)(S,{className:"extern"===this.props.selectedSourceType?"btn-sidebar active":"btn-sidebar",onClick:e=>this.onChangeVideoSource("extern"),variant:"secondary",isLarge:!0,children:b("Externer Anbieter","bootscore")})})]}),(0,e.jsxs)("div",{className:"body-group",children:[(0,e.jsx)(s,{}),(0,e.jsx)(c.ToggleControl,{label:b("Videotitel verwenden","bootscore"),checked:this.props.videoTitelAktiv,__nextHasNoMarginBottom:!0,onChange:this.onChangeVideoTitelAktiv})]}),(0,e.jsxs)("div",{className:this.props.videoTitelAktiv?"block-none":"body-group",children:[(0,e.jsx)(c.TextControl,{label:b("Video Titel","bootscore"),value:this.props.customVideoTitel,__nextHasNoMarginBottom:!0,type:"text",onChange:this.onChangeCustomVideoTitel}),(0,e.jsx)(s,{})]}),(0,e.jsxs)("div",{id:"externSourceWrapper",className:"mediathek"===this.props.selectedSourceType?"block-none":"",children:[(0,e.jsx)(c.RadioControl,{label:"Video Link Source",selected:this.props.selectedExternSourceType,__nextHasNoMarginBottom:!0,options:[{label:"Link",value:"link"},{label:"YouTube",value:"youtube"},{label:"Vimeo",value:"vimeo"}],onChange:e=>{this.onChangeSelectedExternVideoSource(e)}}),(0,e.jsxs)("div",{id:"inputVideoId",className:["youtube","vimeo"].includes(this.props.selectedExternSourceType)?"":"block-none",children:[(0,e.jsx)(s,{}),(0,e.jsx)(c.ToggleControl,{label:b("Externes Cover Bild verwenden","bootscore"),checked:this.props.externesCoverImgAktiv,__nextHasNoMarginBottom:!0,onChange:this.onChangeExternImgAktiv}),(0,e.jsx)(s,{}),(0,e.jsx)(c.TextControl,{label:b("Video ID","bootscore")+":",value:this.props.externVideoId,__nextHasNoMarginBottom:!0,type:"text",onChange:this.onChangExternVideoId})]}),(0,e.jsx)("div",{className:"link"===this.props.selectedExternSourceType?"":"block-none",children:(0,e.jsx)(c.TextControl,{label:b("Video URL","bootscore")+":",value:this.props.externVideoUrl,__nextHasNoMarginBottom:!0,type:"text",onChange:this.onChangExternVideoUrl})})]}),(0,e.jsxs)("div",{id:"videoMediathek",className:"extern"===this.props.selectedSourceType?"block-none":"",children:[(0,e.jsx)(u,{children:(0,e.jsx)(x,{onSelect:this.onSelectVideoMedia,allowedTypes:["video"],render:({open:s})=>(0,e.jsxs)(S,{className:0==t.id?"editor-post-featured-image__toggle":"editor-post-featured-image__preview",onClick:s,children:[0==t.id&&b("Video","bootscore"),null!=i.media&&(0,e.jsxs)("div",{className:"videoBtnSelect",children:[(0,e.jsx)("img",{style:{height:"80px",width:"60px",padding:"10px"},alt:"Video Cover",src:i.icon}),(0,e.jsxs)("p",{children:[i.title,(0,e.jsx)("br",{})," Länge: ",i.fileLength]})]}),t.id?(0,e.jsxs)("div",{className:"videoBtnSelect",children:[(0,e.jsx)("img",{style:{height:"80px",width:"60px",padding:"10px"},alt:"Video Cover",src:t.mediaIcon}),(0,e.jsxs)("p",{children:[t.title,(0,e.jsx)("br",{})," Länge: ",t.fileLength]})]}):""]})})}),t.id?(0,e.jsx)("div",{className:"replace-wrapper",children:(0,e.jsx)(u,{children:(0,e.jsx)(x,{onSelect:this.onSelectVideoMedia,value:t.id,allowedTypes:["video"],render:({open:t})=>(0,e.jsx)(S,{className:"btn-sidebar",onClick:t,variant:"secondary",isLarge:!0,children:b("Video ersetzen","bootscore")})})})}):"",0!=t.id&&(0,e.jsx)("div",{className:"remove-wrapper",children:(0,e.jsx)(u,{children:(0,e.jsx)(S,{onClick:this.onRemoveVideoMedia,isLink:!0,isDestructive:!0,children:b("Video entfernen","bootscore")})})})]})]})}}const{registerBlockType:U}=wp.blocks,{InspectorControls:y}=wp.blockEditor,{PanelBody:k,TextControl:j,SelectControl:O,TextareaControl:M}=wp.components,{Component:I,Fragment:w,createRef:E}=wp.element,{__:A}=wp.i18n;U("hupa/video-single-block",{title:"Video",icon:t,className:"hupa-video-single-block",category:"media",attributes:{postId:{type:"number",default:0},externesCoverImgAktiv:{type:"bool",default:!1},selectedCategory:{type:"string",default:""},mediaData:{type:"string",default:'{"id":0,"url":"","width":"","height":"","mimeType":""}'},mediaSource:{type:"string",default:'{"id":0,"url":"","width":"","height":"","mimeType":"","type":""}'},mediaVideoData:{type:"string",default:'{"id":0,"url":"","width":"","height":"","title":"","fileLength":"","mimeType":"","mediaIcon":""}'},selectedExternSourceType:{type:"string",default:"link"},externVideoId:{type:"string",default:""},externVideoUrl:{type:"string",default:""},selectedSourceType:{type:"string",default:"mediathek"},videoTitelAktiv:{type:"bool",default:!0},customVideoTitel:{type:"string",default:""}},edit:class extends I{constructor(e){super(...arguments),this.props=e,this.osmIframe=E(),this.state={},this.updateSelectedCategory=this.updateSelectedCategory.bind(this),this.OnUpdateMediaData=this.OnUpdateMediaData.bind(this),this.OnUpdateSelectedExternSourceType=this.OnUpdateSelectedExternSourceType.bind(this),this.OnUpdateExternVideoId=this.OnUpdateExternVideoId.bind(this),this.OnUpdateExternVideoUrl=this.OnUpdateExternVideoUrl.bind(this),this.OnUpdateSourceType=this.OnUpdateSourceType.bind(this),this.OnUpdateMediaVideoData=this.OnUpdateMediaVideoData.bind(this),this.OnUpdatePostId=this.OnUpdatePostId.bind(this),this.OnUpdateExternesCoverImgAktiv=this.OnUpdateExternesCoverImgAktiv.bind(this),this.OnUpdateVideoTitelAktiv=this.OnUpdateVideoTitelAktiv.bind(this),this.OnUpdateCustomVideoTitel=this.OnUpdateCustomVideoTitel.bind(this)}OnUpdateMediaData(e){this.props.setAttributes({mediaData:e})}updateSelectedCategory(e){this.props.setAttributes({selectedCategory:e})}OnUpdateSelectedExternSourceType(e){this.props.setAttributes({selectedExternSourceType:e})}OnUpdateExternVideoId(e){this.props.setAttributes({externVideoId:e})}OnUpdateExternVideoUrl(e){this.props.setAttributes({externVideoUrl:e})}OnUpdateSourceType(e){this.props.setAttributes({selectedSourceType:e})}OnUpdateMediaVideoData(e){this.props.setAttributes({mediaVideoData:e})}OnUpdatePostId(e){this.props.setAttributes({postId:e})}OnUpdateExternesCoverImgAktiv(e){this.props.setAttributes({externesCoverImgAktiv:e})}OnUpdateVideoTitelAktiv(e){this.props.setAttributes({videoTitelAktiv:e})}OnUpdateCustomVideoTitel(e){this.props.setAttributes({customVideoTitel:e})}render(){return(0,e.jsxs)(w,{children:[(0,e.jsxs)(y,{children:[(0,e.jsx)(k,{className:"video-cover",title:"Video Cover Image",children:(0,e.jsx)(h,{mediaData:this.props.attributes.mediaData,OnUpdateMediaData:this.OnUpdateMediaData})}),(0,e.jsx)(k,{title:A("Video Source","bootscore"),initialOpen:!0,className:"video-theme-block-panel-body",children:(0,e.jsx)(T,{postId:this.props.attributes.postId,OnUpdatePostId:this.OnUpdatePostId,selectedExternSourceType:this.props.attributes.selectedExternSourceType,OnUpdateSelectedExternSourceType:this.OnUpdateSelectedExternSourceType,externVideoId:this.props.attributes.externVideoId,OnUpdateExternVideoId:this.OnUpdateExternVideoId,externVideoUrl:this.props.attributes.externVideoUrl,OnUpdateExternVideoUrl:this.OnUpdateExternVideoUrl,selectedSourceType:this.props.attributes.selectedSourceType,OnUpdateSourceType:this.OnUpdateSourceType,mediaVideoData:this.props.attributes.mediaVideoData,OnUpdateMediaVideoData:this.OnUpdateMediaVideoData,externesCoverImgAktiv:this.props.attributes.externesCoverImgAktiv,OnUpdateExternesCoverImgAktiv:this.OnUpdateExternesCoverImgAktiv,videoTitelAktiv:this.props.attributes.videoTitelAktiv,OnUpdateVideoTitelAktiv:this.OnUpdateVideoTitelAktiv,customVideoTitel:this.props.attributes.customVideoTitel,OnUpdateCustomVideoTitel:this.OnUpdateCustomVideoTitel})})]}),(0,e.jsx)("div",{className:"video-single-wrapper",children:(0,e.jsxs)("div",{className:"video-form-inner",children:[(0,e.jsx)(t,{}),(0,e.jsx)("h5",{children:"Single Video"})]})})]})}},save:()=>null})})();